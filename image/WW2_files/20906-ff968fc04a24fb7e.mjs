"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[20906],{50165:(e,t,n)=>{n.d(t,{$:()=>c,r:()=>p});var a=n(667294),r=n(498490),i=n(636565),l=n(297728),u=n(730212),s=n(961754),o=n(785893);let{Provider:d,useHook:c}=(0,r.Z)("PinRep");function p({children:e}){let{isAuthenticated:t}=(0,u.B)(),{checkExperiment:n}=(0,l.F)(),{experience:r}=(0,i.Ow)(1000069),[c,p]=(0,a.useState)(!0),[m,f]=(0,a.useState)(!1),[h,v]=(0,a.useState)(!1),[g,_]=(0,a.useState)(null),[y,w]=(0,a.useState)(null),S=(0,i.oS)(1000069),{anyEnabled:I}=n("ap_bmi_custom_activation_nux_revamp_mweb_v2",{dangerouslySkipActivation:!0}),A=(0,s.Z)(t&&I?{name:"UserStateResource",options:{state:"QUICK_SAVES_BOARD_ID"}}:null).data;(0,a.useEffect)(()=>{if(!t){p(!1);return}r&&(!r||r?.experience_id===500417&&r?.display_data.hide_footer)?S.viewExperience(1000069,500417):p(!1),f(!0)},[r]);let D=(0,a.useMemo)(()=>({hasMetSaveRequirementOnUseCaseFeed:h,hasSimplifiedPinGridExpLoaded:m,hidePinRepFooter:c,quickSaveBoardId:A,setHasMetSaveRequirementOnUseCaseFeed:v,setUseCaseFeedOriginalPinId:w,setUseCaseFeedRepinId:_,useCaseFeedOriginalPinId:y,useCaseFeedRepinId:g}),[h,m,c,A,v,w,_,y,g]);return(0,o.jsx)(d,{value:D,children:e})}},293321:(e,t,n)=>{n.d(t,{kf:()=>v,l5:()=>f,of:()=>p,xC:()=>h,yz:()=>m});var a=n(667294),r=n(498490),i=n(915571),l=n(969119),u=n(346645),s=n(415787),o=n(785893);let{Provider:d,useMaybeHook:c}=(0,r.Z)("PwaContext"),p=({children:e,initialContext:t})=>{let[n,r]=(0,a.useState)(null),u=t||{pwaType:"unknown",twaType:null},c=u.pwaType;(0,l.Z)(()=>{let e=(0,i.FB)(window)||"unknown";r(e),c!==e&&(0,s.nP)("pwa.type_mismatch",{sampleRate:1,tags:{serverPwaType:c,clientPwaType:e,conflict:"unknown"!==c&&"unknown"!==e}})});let p="unknown"===c&&n?n:c,{twaType:m}=u,f=(0,a.useMemo)(()=>({pwaType:p,twaType:m}),[p,m]);return(0,o.jsx)(d,{value:f,children:e})},m=()=>{let e=c();return e?.pwaType??"unknown"},f=()=>{let e=c();return e?.twaType??null},h=()=>"android-twa"===m(),v=()=>{let e=m(),t=(0,u.Z)();return"unknown"===e&&t?null:"windows"===e}},529264:(e,t,n)=>{n.d(t,{H5:()=>g,WS:()=>y,Xn:()=>h,an:()=>v,lk:()=>w});var a=n(282999),r=n(812477),i=n(868808);let l="BING",u="GOOGLE",s="YAHOO",o="YANDEX",d="RAKUTEN",c="NAVER",p="AMP_CACHE",m="DUCKDUCKGO",f=[u,l,s,o,d,c,p,m];function h(e){return f.includes(function(e){let{hostname:t}=(0,i.Qc)(e,!0);if(t&&e){if(t.includes("google.")||e.includes("android-app://com.google.android.googlequicksearchbox"))return u;if(t.includes("bing."))return l;if(t.includes("yahoo."))return s;if(t.includes("yandex."))return o;else if(t.includes("rakuten."))return d;else if(t.includes("naver."))return c;else if(t.includes("duckduckgo."))return m;else if(t.includes(".cdn.ampproject.org"))return p}return""}(e))}function v(e){return e||"undefined"!=typeof document&&document.referrer||""}let g=e=>{let t=new URL(e);return t.searchParams.set("nii","t"),t.href},_=e=>"/"!==e[e.length-1]?`${e}/`:e,y=e=>{let t=_(e),n=(0,a.ll)({pathname:t});return(0,a.L6)(n)?"PIN":(0,a.am)(n)?"BOARD":(0,r.Z)(n)?"PROFILE":(0,a.bo)(n)?"TODAY":(0,a.z_)(n)?"IDEA":(0,a.R$)(n)?"SHOPPING":"UNKNOWN"},w=({selector:e,skipExternal:t})=>{let n=Array.from(document.querySelectorAll(e)),a={pin:[],board:[],user:[],today:[],idea:[],shopping:[]},r=new Set;return n.forEach(e=>{let n=e.getAttribute("href");if(!n||n.startsWith("#")||t&&n.startsWith("http")&&!n.includes(window.location.hostname))return;let i=_(n);if(r.has(i))return;r.add(i);let l=y(i);"PIN"===l?a.pin.push(i):"BOARD"===l?a.board.push(i):"PROFILE"===l?a.user.push(i):"TODAY"===l?a.today.push(i):"IDEA"===l?a.idea.push(i):"SHOPPING"===l&&a.shopping.push(i)}),a}},623722:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(414416),r=n(503237);let i=e=>{let t=/^\/pin\/([a-zA-Z0-9-]+)/,n=(0,r.Z)(e);if(t.test(n.path)){let e=n.path.match(t);if(e)return(0,a.Z)(e[1]).pinId||void 0}}},563646:(e,t,n)=>{n.d(t,{w:()=>s,z:()=>u});var a=n(667294),r=n(498490),i=n(785893);let{Provider:l,useMaybeHook:u}=(0,r.Z)("CloseupPreviewContext");function s({children:e}){let[t,n]=(0,a.useState)(Object.freeze({})),r=(0,a.useMemo)(()=>({setData:(e,t)=>n(n=>({...n,[e]:t})),getData:e=>t[e]}),[t]);return(0,i.jsx)(l,{value:r,children:e})}},193836:(e,t,n)=>{n.d(t,{_l:()=>y,cO:()=>_,t2:()=>w,w2:()=>S,xM:()=>g});var a=n(667294),r=n(616550),i=n(252071),l=n(282999),u=n(868808),s=n(410150),o=n(383399),d=n(785893);let c="UnauthDesktopSocialPinLandingPageContext",p="AthDesktopSocialPinLandingPageContext",m="AuthMobileSocialPinLandingPageContext",f=(0,a.createContext)(),h=({children:e})=>{let[t,n]=(0,a.useState)(!1),[r,i]=(0,a.useState)(!1),l=(0,a.useMemo)(()=>({hasSeenAuthMobileLandingToast:t,setHasSeenAuthMobileLandingToast:n,hasSeenAuthDesktopLandingToast:r,setHasSeenAuthDesktopLandingToast:i}),[t,n,r,i]);return(0,d.jsx)(f.Provider,{value:l,children:e})},v=(0,a.createContext)({key:"",data:null}),g=({children:e})=>{let t=(0,r.TH)(),n=(0,o.Z)(),f=n&&n.isAuth,g=(0,s.HG)(),_=(0,a.useRef)((0,l.fY)(t)&&(0,u.mB)(t.search).invite_code||null),y=(0,r.LX)(t.pathname,{path:"/pin/:id"}),w=String(y&&"id"in y.params&&y.params.id)||"",[S,I]=(0,a.useState)({key:"",data:null});return(0,a.useEffect)(()=>{(async function(){let e=_.current;if(e)try{let t=i.Z.create("InviteCodeMetadataResource",{invite_code:e}),a=(await t.callGet()).resource_response.data;if(a){let e=a.sender??null,t=f&&e.id!==n.id&&e?.should_show_messaging&&n.should_show_messaging;!f&&g?I({key:c,data:{inviter:e,popoverData:e&&![5,9,12,16].includes(a.invite_channel)?{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name}:null}}):t&&!g?I({key:m,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:n.id||""},pin:{pinId:w}}}}):t&&g&&I({key:p,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:n.id||""},pin:{pinId:w}}}})}else I({key:"",data:null})}catch{I({key:"",data:null})}})()},[f,g,n,w]),(0,d.jsx)(h,{children:(0,d.jsx)(v.Provider,{value:S,children:e})})},_=()=>{let e=(0,a.useContext)(v);return e.key===c?e:null},y=()=>{let e=(0,a.useContext)(v);return e.key===m?e:null},w=()=>{let e=(0,a.useContext)(v);return e.key===p?e:null},S=()=>(0,a.useContext)(f)},109272:(e,t,n)=>{n.d(t,{M:()=>E,R:()=>k});var a=n(667294),r=n(609326),i=n(498490),l=n(993754),u=n(864723),s=n(969119),o=n(640498),d=n(842909);let c=()=>(0,u.M0)().getItem(r.Vb)||[],p=({pinId:e,link:t,imageSignature:n,domain:a})=>{let i=[...c()],l=i.length,s=l?i[0].pinId:"";if(!l||e!==s){let i=(0,d.Z)({pinId:e,link:t,imageSignature:n,domain:a});(0,u.M0)().prependItem(r.Vb,i,o.LG)}},m=()=>(0,u.M0)().getItem(r.ny)||[],f=({query:e,rs:t,scope:n,rg:a})=>{let i=[...m()],l=i.length,s=l?i[0].query:"";if(!l||e!==s){let i=(0,d.Z)({query:e,rs:t,scope:n,rg:a});(0,u.M0)().prependItem(r.ny,i,o.LG)}},h=({query:e})=>{let t=[...m()].filter(t=>t.query!==e);(0,u.M0)().setItem(r.ny,t)};var v=n(445330),g=n(927371),_=n(592305),y=n(785893);let w=(e,t)=>{Object.keys(e).forEach(n=>{"function"!=typeof e[n]&&void 0!==e[n]&&(t[n]=e[n])})},S=()=>(0,u.M0)().getItem(r.s1)??[],I=()=>parseInt((0,u.M0)().getItem(r.rN)||0,10),A=e=>({...e,_updateUnauthUserAggregateDefinitions:function(){let{completedSearches:t,closeupPins:n,clickthroughPins:a,downloadedPinsCount:r}=e;e.isQUS=Number(t.length>=1||n.length>=3||a.length>=1||r>=1)},_getDaysSinceLastRevisitation:function(){let{revisitationState:t}=e,{ts:n}=t,a=new Date,r=new Date(n||a);return Math.max(Math.floor(Number(((a.getTime()-r.getTime())/864e5).toFixed(2))),0)},getSnapshot:function(){let t={};return w(e,t),t}}),D=({isAuthenticated:e,countryFromIp:t,countryFromHostName:n,regionFromIp:a})=>{let r=(0,l.Z)({countryFromHostName:n||"",countryFromIp:t||"",regionFromIp:a||"",isAuthenticated:!!e}),i={isAuthenticated:Number(e),countryFromIp:t||"",countryFromHostName:n||"",regionFromIp:a||"",visitedUnauthPages:[],closeupPins:[],completedSearches:[],clickthroughPins:[],downloadedPinsCount:0,savedPins:[],isQUS:0,revisitationState:(0,v.K7)(),daysSinceLastRevisitation:0,isStorageAllowed:Number(r)};if(e||!i.isStorageAllowed)return Object.freeze({...A(i),...i});i.visitedUnauthPages=(0,_.ZP)(),i.closeupPins=(0,g.Z)(),i.completedSearches=m(),i.clickthroughPins=c(),i.downloadedPinsCount=I(),i.savedPins=S(),i.revisitationState=(0,v.iU)();let u=A(i);return i.daysSinceLastRevisitation=u._getDaysSinceLastRevisitation(),u._updateUnauthUserAggregateDefinitions(),Object.freeze({...u,...i})},{Provider:P,useHook:k}=(0,i.Z)("UnauthUserStateContext");function U(e,t){let{isAuthenticated:n,countryFromIp:a,countryFromHostName:r,isStorageAllowed:i,regionFromIp:l}=e;if(n||!i)return e;switch(t.type){case"UPDATE":break;case"ADD_UNAUTH_COMPLETED_SEARCH":f(t.payload);break;case"REMOVE_UNAUTH_COMPLETED_SEARCH":h(t.payload);break;case"ADD_UNAUTH_CLICKTHROUGH_PIN":p(t.payload);break;default:return e}return D({isAuthenticated:n,countryFromIp:a,countryFromHostName:r,regionFromIp:l})}function E({children:e,initialState:t}){let[n,r]=(0,a.useReducer)(U,t,D);(0,s.Z)(()=>{r({type:"UPDATE"})});let i=(0,a.useMemo)(()=>({unauthUserState:n,unauthUserStateDispatch:r}),[n,r]);return(0,y.jsx)(P,{value:i,children:e})}},842909:(e,t,n)=>{n.d(t,{Z:()=>a});let a=function(e){return{...e,ts:Date.now()}}},445330:(e,t,n)=>{n.d(t,{K7:()=>l,Vd:()=>s,iU:()=>u});var a=n(609326),r=n(864723),i=n(842909);let l=()=>({count:1,time:0,ts:Date.now()}),u=()=>{try{let{count:e,time:t,ts:n}=(0,r.M0)().getItem(a.SI)??{};if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return{count:e,time:t,ts:n};throw Error("Invalid revisitation data")}catch(e){return l()}},s=e=>{(0,r.M0)().setItem(a.SI,(0,i.Z)(e))}},814779:(e,t,n)=>{n.d(t,{E:()=>l,S:()=>u});var a=n(667294),r=n(786525);let i="_loggingInNotHome",l=e=>{e?(0,r.Nh)(i,1):(0,r.L_)(i)},u=()=>{let[e,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{t(!0)},[]),e&&(0,r.qn)(i)}},897791:(e,t,n)=>{n.d(t,{$:()=>u,Z:()=>d});var a=n(609326),r=n(192820),i=n(864723),l=n(166408);let u=2,s=e=>e?.pins??[],o=e=>e.length?{pins:e}:null,d=()=>{let e=(0,i.M0)(),t=s(e.accessAllowed?e.getItem(a.s1):l.ZP.getItem(r.w3)),n=t=>e.accessAllowed?e.setItem(a.s1,o(t)):l.ZP.setItem(r.w3,o(t)),d=()=>t.length<u;return{pins:t,save:e=>{d()&&n(t.filter(({id:t})=>t!==e.id).concat([e]))},unsave:e=>n(t.filter(({id:t})=>t!==e)),isSaved:e=>t.some(({id:t})=>t===e),clear:()=>n([]),canSaveMore:d}}},568098:(e,t,n)=>{n.d(t,{B:()=>u,f:()=>s});var a=n(667294),r=n(498490),i=n(785893);let{Provider:l,useMaybeHook:u}=(0,r.Z)("InlineSaveContext");function s({children:e}){let[t,n]=(0,a.useState)(Object.freeze({})),r=(0,a.useMemo)(()=>({getIsInlineSave:e=>!!t[e],setIsInlineSave:(e,t)=>n(n=>({...n,[e]:t})),unsave:e=>n(t=>{let n={...t};return delete n[e],n})}),[t]);return(0,i.jsx)(l,{value:r,children:e})}},927371:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(640498),r=n(623722),i=n(592305);let l=e=>{let t=new Date,n=new Date(new Date().setDate(t.getDate()-a.ZB));return e.filter(e=>"closeup"===e.pageType&&new Date(e.ts)>=n)},u=()=>l((0,i.ZP)()).map(e=>({...e,id:(0,r.Z)(e.path)||""}))},592305:(e,t,n)=>{n.d(t,{Z4:()=>o,ZP:()=>d,t_:()=>u});var a=n(609326),r=n(640498),i=n(864723),l=n(842909);let u=()=>{let e=(0,i.M0)().getItem(a.pm);return null!==e?JSON.stringify(e):""},s=()=>(0,i.M0)().getItem(a.pm)??[],o=(e,t)=>{let n=[...s()],u=n.length,o=u?n[0].path:"";if(!u||e!==o){let n=(0,l.Z)({path:e,pageType:t});(0,i.M0)().prependItem(a.pm,n,r.LG)}},d=s}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/20906-ff968fc04a24fb7e.mjs.map